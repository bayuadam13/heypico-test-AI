<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Maps Viewer</title>
</head>
<body>
  <h1>Maps Viewer</h1>
  <form id="frm">
    <input id="q" placeholder="e.g. coffee near Bandung" size="50"/>
    <button type="submit">Cari</button>
  </form>
  <div id="results"></div>

  <script>
    document.getElementById('frm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const q = document.getElementById('q').value;
      const resp = await fetch(`/api/places?q=${encodeURIComponent(q)}`);
      const data = await resp.json();
      const r = document.getElementById('results');
      r.innerHTML = "";
      data.forEach(p=>{
        const el = document.createElement('div');
        el.innerHTML = `<h3>${p.name}</h3>
                        <p>${p.address || ''}</p>
                        <a target="_blank" href="${p.map_url}">Open in Google Maps</a>
                        <hr/>`;
        r.appendChild(el);
      });
    });
  </script>
</body>
</html>
